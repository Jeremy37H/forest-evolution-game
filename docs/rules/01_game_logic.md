# 核心遊戲邏輯守則 (Always On)

## 1. 戰鬥引擎保護

- **禁止修改核心判定**：除非明確要求，否則禁止更動 `#server/services/gameService.js` 中的 `calculateDamage` 函數與**屬性矩陣運算表**。
- **傷害公式準則**：傷害計算必須嚴格遵守公式：$Max(1, 攻擊方攻擊力 + 回合加成 - 防禦方防禦力)$。
- **屬性特殊性**：必須保留「雷屬性」打人必中且被打必中的邏輯，不可與五行相剋邏輯合併。

## 2. 資源管理

- **HP 門檻檢查**：任何涉及 HP 扣除的操作（如：競標、升級），必須先判定剩餘 HP。
- **競標限制**：競標後必須保留至少 5 點 HP，且重複出價時必須執行「預算回還」邏輯。
